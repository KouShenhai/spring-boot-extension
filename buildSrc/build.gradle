import org.gradle.util.GradleVersion

apply plugin: "groovy-gradle-plugin"

repositories {
    maven { url "https://plugins.gradle.org/m2/" }
    maven { url "https://repo.spring.io/release" }
    maven { url "https://maven.aliyun.com/repository/public" }
}

ext {
    bootVersion = libs.versions.springBoot.get()
    nexusStaging = libs.versions.nexusStaging.get()
}

dependencies {
    implementation "org.springframework.boot:spring-boot-gradle-plugin:$bootVersion"
    implementation "io.codearte.gradle.nexus:gradle-nexus-staging-plugin:$nexusStaging"
}

gradlePlugin {
    plugins {
        bomPlugin {
            id = "com.livk.bom"
            implementationClass = "com.livk.boot.BomPlugin"
        }
        modulePlugin {
            id = "com.livk.module"
            implementationClass = "com.livk.boot.ModulePlugin"
        }
        commonPlugin {
            id = "com.livk.common"
            implementationClass = "com.livk.boot.CommonPlugin"
        }
        rootProjectPlugin {
            id = "com.livk.root"
            implementationClass = "com.livk.boot.RootPlugin"
        }
        servicePlugin {
            id = "com.livk.service"
            implementationClass = "com.livk.boot.ServicePlugin"
        }
        deployedPlugin {
            id = "com.livk.mvn.deployed"
            implementationClass = "com.livk.boot.maven.DeployedPlugin"
        }
    }
}

(project.tasks.named(JavaPlugin.JAR_TASK_NAME).get() as Jar).manifest {
    attributes(
            [
                    "Created-By"    : System.getProperty("java.version") + " (" +
                            System.getProperty("java.specification.vendor") + ")",
                    "Gradle-Version": GradleVersion.current()
            ]
    )
}
