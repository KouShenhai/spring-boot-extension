plugins {
    id "com.livk.service"
    alias libs.plugins.asciidoctor.jvm
}

configurations {
    asciidoctorExt
}

dependencies {
    implementation project(":spring-extension-commons")
    implementation "org.springframework.boot:spring-boot-starter-web"
    testImplementation "org.springframework.restdocs:spring-restdocs-mockmvc"
    asciidoctorExt "org.springframework.restdocs:spring-restdocs-asciidoctor"
}

test {
    useJUnitPlatform()
    outputs.dir file("build/generated-snippets")
}

asciidoctor {
    inputs.dir file("build/generated-snippets")
    configurations "asciidoctorExt"
    dependsOn test
}

bootJar {
    dependsOn asciidoctor
    from("${asciidoctor.outputDir}/html5") {
        into "static/docs"
    }
}
