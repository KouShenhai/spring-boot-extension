plugins {
    id "com.livk.common"
    id "com.google.protobuf" version("0.9.3")
}

dependencies {
    api "io.netty:netty-all:4.1.91.Final"
    api "com.google.protobuf:protobuf-java:3.22.2"
    testImplementation "org.springframework:spring-tx:6.0.8"
    testImplementation "org.springframework.boot:spring-boot-starter-test:${libs.versions.spring.boot.get()}"
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:3.22.2"
    }

    plugins {
        grpc {
            artifact = "io.grpc:protoc-gen-grpc-java:1.53.0"
        }
    }

    generateProtoTasks {
        ofSourceSet("main").configureEach {
            plugins {
                grpc {}
            }
        }
    }
}
